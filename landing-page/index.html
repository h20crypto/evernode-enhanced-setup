<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Evernode Host - Professional dApp Deployment</title>
    <meta name="description" content="Deploy your dApps on Enhanced Evernode with professional cluster management, real-time monitoring, and transparent EVR pricing.">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
            color: #ffffff;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Navigation */
        .nav-bar {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(0, 255, 136, 0.2);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: #00ff88;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 30px;
            align-items: center;
        }

        .nav-links a {
            color: #ffffff;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .nav-links a:hover {
            color: #00ff88;
        }

        .nav-active {
            color: #00ff88 !important;
            position: relative;
        }

        .nav-active::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 0;
            right: 0;
            height: 2px;
            background: #00ff88;
        }

        .role-indicator {
            background: rgba(0, 255, 136, 0.2);
            color: #00ff88;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        /* Hero Section */
        .hero-section {
            padding: 80px 20px;
            text-align: center;
            background: radial-gradient(circle at center, rgba(0, 255, 136, 0.1) 0%, transparent 70%);
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #ffffff 0%, #00ff88 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-subtitle {
            font-size: 1.3rem;
            margin-bottom: 40px;
            opacity: 0.9;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Buttons */
        .btn {
            display: inline-block;
            padding: 15px 30px;
            border-radius: 10px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            margin: 5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #00ff88 0%, #00cc6a 100%);
            color: #000000;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 255, 136, 0.3);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .btn-outline {
            background: transparent;
            color: #00ff88;
            border: 2px solid #00ff88;
        }

        .btn-outline:hover {
            background: #00ff88;
            color: #000000;
        }

        .btn-disabled {
            background: rgba(255, 255, 255, 0.1);
            color: #666666;
            cursor: not-allowed;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .btn-disabled:hover {
            transform: none;
            box-shadow: none;
        }

        /* Commission Widget Styles */
        .commission-widget {
            background: rgba(0, 255, 136, 0.1);
            border: 2px solid rgba(0, 255, 136, 0.3);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            text-align: center;
        }

        .commission-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .commission-stat {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }

        .commission-amount {
            font-size: 1.8rem;
            font-weight: 700;
            color: #00ff88;
            margin-bottom: 5px;
        }

        .referral-link-box {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
        }

        .premium-cta {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            margin: 20px 0;
        }

        /* Sections */
        .section-title {
            font-size: 2.5rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 20px;
            color: #ffffff;
        }

        .section-subtitle {
            text-align: center;
            font-size: 1.1rem;
            opacity: 0.8;
            margin-bottom: 50px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Stats Grid */
        .stats-section {
            padding: 60px 20px;
            background: rgba(0, 0, 0, 0.2);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            max-width: 1000px;
            margin: 0 auto;
        }

        .stat-item {
            text-align: center;
            padding: 30px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            border: 1px solid rgba(0, 255, 136, 0.2);
        }

        .stat-number {
            display: block;
            font-size: 2.5rem;
            font-weight: 700;
            color: #00ff88;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 1rem;
            opacity: 0.8;
        }

        /* Features Grid */
        .features-section {
            padding: 80px 20px;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 40px 30px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s ease, border-color 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            border-color: rgba(0, 255, 136, 0.3);
        }

        .feature-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            display: block;
        }

        .feature-title {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #ffffff;
        }

        .feature-description {
            opacity: 0.8;
            line-height: 1.6;
        }

        /* Role-based visibility */
        .tenant-only {
            display: block;
        }

        .admin-only {
            display: none;
        }

        .demo-only {
            display: none;
        }

        /* Role banners */
        .role-banner {
            background: linear-gradient(135deg, #00ff88 0%, #00cc6a 100%);
            color: #000000;
            padding: 10px 20px;
            text-align: center;
            font-weight: 600;
            display: none;
        }

        /* CTA Buttons */
        .cta-buttons {
            text-align: center;
            margin-top: 40px;
        }

        /* Quick Access Cards */
        .quick-access {
            padding: 60px 20px;
            background: rgba(0, 0, 0, 0.3);
        }

        .access-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            max-width: 1000px;
            margin: 0 auto;
        }

        .access-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            text-decoration: none;
            color: #ffffff;
        }

        .access-card:hover {
            transform: translateY(-3px);
            border-color: rgba(0, 255, 136, 0.3);
            background: rgba(255, 255, 255, 0.1);
        }

        .access-icon {
            font-size: 2rem;
            margin-bottom: 15px;
            display: block;
        }

        .access-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .access-description {
            font-size: 0.9rem;
            opacity: 0.7;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem;
            }

            .nav-links {
                gap: 15px;
                font-size: 0.9rem;
            }

            .features-grid,
            .stats-grid,
            .access-grid {
                grid-template-columns: 1fr;
            }

            .container {
                padding: 0 15px;
            }

            .commission-stats {
                grid-template-columns: 1fr;
            }
        }

        /* Loading States */
        .loading {
            opacity: 0.6;
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        /* Deployment Section Styles */
        .deployment-section {
            background: rgba(59, 130, 246, 0.1);
            padding: 60px 20px;
            margin: 40px 0;
            border-radius: 20px;
        }

        .deployment-section .section-title {
            color: #3b82f6;
        }

        /* Copy Button Styles */
        button {
            cursor: pointer;
            transition: all 0.2s ease;
        }

        button:hover {
            opacity: 0.8;
            transform: scale(1.05);
        }

        /* Commission Calculator Styles */
        .commission-calculator {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .commission-calculator input {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            padding: 8px 12px;
            color: white;
            width: 80px;
        }

        /* Coming Soon Indicator */
        .coming-soon {
            position: relative;
        }

        .coming-soon::after {
            content: 'Coming Soon';
            position: absolute;
            top: -8px;
            right: -10px;
            background: #fbbf24;
            color: #000;
            font-size: 0.7rem;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <!-- Role Banner -->
    <div id="role-banner" class="role-banner"></div>

    <!-- Navigation -->
    <nav class="nav-bar">
        <div class="nav-container">
            <div class="logo">Enhanced Evernode</div>
            <ul class="nav-links">
                <li><a href="/" class="nav-active">Dashboard</a></li>
                <li><a href="/host-discovery.html">Discovery</a></li>
                <li><a href="/cluster/roi-calculator.html" class="tenant-only">ROI Calculator</a></li>
                <li><a href="/monitoring-dashboard.html" class="admin-only">Monitoring</a></li>
                <li><a href="/my-earnings.html" class="admin-only">Earnings</a></li>
                <li><a href="/leaderboard.html" class="admin-only">Leaderboard</a></li>
                <li><a href="/cluster/paywall.html" style="color: #3b82f6; font-weight: 600;">Premium</a></li>
                <li class="role-indicator" id="role-indicator">Tenant Mode</li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <h1 class="hero-title">Enhanced Evernode Host</h1>
            <p class="hero-subtitle">
                Professional dApp deployment with cluster management, real-time monitoring, and transparent EVR pricing. 
                Transform your host into a premium service.
            </p>
            
            <!-- Value Proposition Split -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin: 40px 0; max-width: 1000px; margin-left: auto; margin-right: auto;">
                <div style="background: rgba(59, 130, 246, 0.1); border: 2px solid rgba(59, 130, 246, 0.3); border-radius: 15px; padding: 30px; text-align: center;" class="tenant-only">
                    <h3 style="color: #3b82f6; margin-bottom: 15px; font-size: 1.3rem;">🚀 Deploy Your dApp</h3>
                    <p style="margin-bottom: 20px; opacity: 0.9;">4-step deployment with transparent EVR pricing</p>
                    <div style="font-size: 2rem; font-weight: 700; color: #3b82f6; margin-bottom: 10px;" id="hero-evr-cost">0.005 EVR/hour</div>
                    <div style="font-size: 0.9rem; opacity: 0.7; margin-bottom: 20px;" id="hero-usd-cost">Starting cost for standard dApps</div>
                    <a href="#tenant-deploy" class="btn btn-primary" onclick="scrollToTenantSection()">
                        🎯 Start Deployment
                    </a>
                </div>
                
                <div style="background: rgba(16, 185, 129, 0.1); border: 2px solid rgba(16, 185, 129, 0.3); border-radius: 15px; padding: 30px; text-align: center;" class="admin-only">
                    <h3 style="color: #10b981; margin-bottom: 15px; font-size: 1.3rem;">💰 Earn More Revenue</h3>
                    <p style="margin-bottom: 20px; opacity: 0.9;">3x more bookings + $10 per premium referral</p>
                    <div style="font-size: 2rem; font-weight: 700; color: #10b981; margin-bottom: 10px;">$10.00</div>
                    <div style="font-size: 0.9rem; opacity: 0.7; margin-bottom: 20px;">Per successful referral + future subscriptions</div>
                    <a href="#host-benefits" class="btn btn-primary" onclick="scrollToHostSection()">
                        📈 See Commission Dashboard
                    </a>
                </div>
            </div>
            
            <div class="cta-buttons">
                <a href="#" class="btn btn-primary coming-soon" style="font-size: 1.1rem; padding: 18px 35px;" onclick="showComingSoon()">
                    🎮 Launch Demo
                </a>
                <a href="/cluster/dapp-manager.html" class="btn btn-secondary admin-only">
                    🏗️ Cluster Manager
                </a>
                <a href="/cluster/roi-calculator.html" class="btn btn-secondary tenant-only">
                    💰 ROI Calculator
                </a>
                <a href="#" class="btn btn-outline premium-cluster-link" data-commission-source="hero">
                    💎 Upgrade to Premium
                </a>
            </div>
        </div>
    </section>

    <!-- Commission Section (Host Admin Only) -->
    <section id="host-benefits" class="commission-section admin-only" style="display: none; padding: 60px 20px; background: rgba(0,255,136,0.05);">
        <div class="container">
            <h2 class="section-title" style="color: #00ff88;">💰 Host Commission Program</h2>
            <p style="text-align: center; margin-bottom: 40px; opacity: 0.9; max-width: 600px; margin-left: auto; margin-right: auto;">
                Earn $10.00 on every $49.99 premium cluster manager sale you refer. Plus future recurring commissions on subscription features once the dApp is live!
            </p>
            
            <div class="commission-widget" id="commission-widget">
                <!-- Content populated by JavaScript -->
                <div style="text-align: center;">
                    <div style="font-size: 1.2rem; margin-bottom: 20px;">🔄 Loading commission data...</div>
                </div>
            </div>

            <!-- Commission Calculator -->
            <div class="commission-calculator">
                <h4 style="color: #00ff88; margin-bottom: 15px;">💰 Commission Calculator</h4>
                <div style="margin: 15px 0;">
                    <label>Monthly referrals:</label>
                    <input type="number" id="referral-count" value="5" min="0" style="margin: 0 10px;">
                    <span>× $10.00 per sale = </span>
                    <strong id="monthly-potential" style="color: #00ff88;">$50.00/month</strong>
                </div>
                <div style="font-size: 0.9rem; opacity: 0.8; margin-top: 10px;">
                    💡 One-time fee: $49.99 × 20% = <strong>$10.00 per referral</strong><br>
                    🚀 Future subscription commissions coming soon!
                </div>
            </div>
        </div>
    </section>

    <!-- Real-Time Stats -->
    <section class="stats-section">
        <div class="container">
            <h2 class="section-title">📊 Live Host Statistics</h2>
            
            <!-- Data Source Indicator -->
            <div style="text-align: center; margin-bottom: 20px;">
                <div style="background: rgba(59,130,246,0.1); border: 1px solid rgba(59,130,246,0.3); border-radius: 8px; padding: 10px; display: inline-block;">
                    <span style="font-size: 0.9rem; color: #3b82f6;" id="data-source-indicator">🔄 Connecting to live APIs...</span>
                </div>
            </div>
            
            <div class="stats-grid">
                <div class="stat-item">
                    <span class="stat-number" id="instance-count">Loading...</span>
                    <span class="stat-label">Active Instances</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="availability">Loading...</span>
                    <span class="stat-label">Available Slots</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="uptime">99.9%</span>
                    <span class="stat-label">Uptime</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="revenue">Loading...</span>
                    <span class="stat-label">Current Rate</span>
                </div>
            </div>
            
            <!-- Host Information Panel -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 30px; max-width: 800px; margin-left: auto; margin-right: auto;">
                <!-- Host Status -->
                <div style="background: rgba(0,255,136,0.1); border: 1px solid rgba(0,255,136,0.3); border-radius: 10px; padding: 15px; position: relative;">
                    <div style="font-size: 1rem; font-weight: 600; color: #00ff88; margin-bottom: 5px;">Host Status</div>
                    <div style="font-size: 1.1rem; font-weight: 600;" id="host-status">Checking availability...</div>
                    <div style="font-size: 0.8rem; opacity: 0.8; margin-top: 5px;">Last updated: <span id="stats-timestamp">Loading...</span></div>
                    <button onclick="forceRefreshStats()" style="position: absolute; top: 8px; right: 8px; background: rgba(0,255,136,0.2); border: 1px solid rgba(0,255,136,0.5); color: #00ff88; padding: 3px 6px; border-radius: 4px; cursor: pointer; font-size: 0.7rem;" title="Refresh Host Stats">🔄</button>
                </div>
                
                <!-- Host Wallet Address -->
                <div style="background: rgba(59,130,246,0.1); border: 1px solid rgba(59,130,246,0.3); border-radius: 10px; padding: 15px; position: relative;">
                    <div style="font-size: 1rem; font-weight: 600; color: #3b82f6; margin-bottom: 5px;">Host Wallet (r-address)</div>
                    <div style="font-size: 0.9rem; font-family: 'Courier New', monospace; color: #ffffff; word-break: break-all;" id="host-wallet">Loading...</div>
                    <div style="font-size: 0.8rem; opacity: 0.8; margin-top: 5px;">Xahau address for EVR payments</div>
                    <button onclick="copyHostWallet()" style="position: absolute; top: 8px; right: 8px; background: rgba(59,130,246,0.2); border: 1px solid rgba(59,130,246,0.5); color: #3b82f6; padding: 3px 6px; border-radius: 4px; cursor: pointer; font-size: 0.7rem;" title="Copy Wallet Address">📋</button>
                </div>
            </div>
        </div>
    </section>

    <!-- 4-Step Deployment Process for Tenants -->
    <section id="tenant-deploy" class="deployment-section tenant-only">
        <div class="container">
            <h2 class="section-title" style="color: #3b82f6;">🚀 Deploy Your dApp in 4 Steps</h2>
            <p style="text-align: center; margin-bottom: 40px; opacity: 0.9; max-width: 600px; margin-left: auto; margin-right: auto;">
                Deploy any Docker container to this Enhanced Evernode host in under 5 minutes. Pay only what you use with EVR tokens.
            </p>
            
            <div style="background: rgba(251,191,36,0.1); border: 1px solid rgba(251,191,36,0.3); border-radius: 10px; padding: 15px; margin-bottom: 30px; text-align: center;">
                <div style="font-size: 1rem; font-weight: 600; color: #fbbf24; margin-bottom: 8px;">🖥️ Command Line Required</div>
                <div style="font-size: 0.9rem; opacity: 0.9;">
                    <strong>Windows:</strong> Press Win+R, type "cmd", press Enter<br>
                    <strong>Mac:</strong> Press Cmd+Space, type "Terminal", press Enter<br>
                    <strong>Linux:</strong> Press Ctrl+Alt+T
                </div>
            </div>
            
            <div style="max-width: 800px; margin: 0 auto;">
                <!-- Step 1: Install DevKit -->
                <div style="background: rgba(255,255,255,0.1); border-radius: 15px; padding: 25px; margin-bottom: 20px; border-left: 5px solid #3b82f6;">
                    <div style="display: flex; align-items: center; margin-bottom: 15px;">
                        <div style="background: #3b82f6; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 15px; font-weight: bold;">1</div>
                        <h3 style="margin: 0; color: #3b82f6;">Install Evernode DevKit</h3>
                    </div>
                    <div style="background: #1a1a1a; border-radius: 8px; padding: 15px; margin-bottom: 10px; position: relative; font-family: 'Courier New', monospace; color: #00ff88;">
                        <code>npm install -g @evernode/evdevkit</code>
                        <button onclick="copyCode('npm install -g @evernode/evdevkit')" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: rgba(0,255,136,0.2); border: 1px solid #00ff88; color: #00ff88; padding: 5px 10px; border-radius: 5px; cursor: pointer; font-size: 0.8rem;">📋 Copy</button>
                    </div>
                    <p style="margin: 0; font-size: 0.9rem; opacity: 0.8;">Official Evernode development toolkit for dApp deployment<br><em>(Linux users: add "sudo" before npm)</em></p>
                </div>

                <!-- Step 2: Generate Keys -->
                <div style="background: rgba(255,255,255,0.1); border-radius: 15px; padding: 25px; margin-bottom: 20px; border-left: 5px solid #3b82f6;">
                    <div style="display: flex; align-items: center; margin-bottom: 15px;">
                        <div style="background: #3b82f6; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 15px; font-weight: bold;">2</div>
                        <h3 style="margin: 0; color: #3b82f6;">Generate User Keypair</h3>
                    </div>
                    <div style="background: #1a1a1a; border-radius: 8px; padding: 15px; margin-bottom: 10px; position: relative; font-family: 'Courier New', monospace; color: #00ff88;">
                        <code>evdevkit keygen</code>
                        <button onclick="copyCode('evdevkit keygen')" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: rgba(0,255,136,0.2); border: 1px solid #00ff88; color: #00ff88; padding: 5px 10px; border-radius: 5px; cursor: pointer; font-size: 0.8rem;">📋 Copy</button>
                    </div>
                    <div style="background: rgba(239,68,68,0.1); border: 1px solid rgba(239,68,68,0.3); border-radius: 8px; padding: 10px; margin-top: 10px;">
                        <div style="font-size: 0.9rem; color: #ef4444; font-weight: 600;">💾 IMPORTANT: Save your keys!</div>
                        <div style="font-size: 0.8rem; opacity: 0.9;">This outputs a public and private key. Save the private key securely - you'll need it for deployment.</div>
                    </div>
                </div>

                <!-- Step 3: Set Environment Variables -->
                <div style="background: rgba(255,255,255,0.1); border-radius: 15px; padding: 25px; margin-bottom: 20px; border-left: 5px solid #3b82f6;">
                    <div style="display: flex; align-items: center; margin-bottom: 15px;">
                        <div style="background: #3b82f6; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 15px; font-weight: bold;">3</div>
                        <h3 style="margin: 0; color: #3b82f6;">Set Environment Variables</h3>
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <strong style="color: #ffffff;">Windows (Command Prompt):</strong>
                        <div style="background: #1a1a1a; border-radius: 8px; padding: 15px; margin: 8px 0; position: relative; font-family: 'Courier New', monospace; color: #00ff88; font-size: 0.9rem;">
                            <code>set EV_TENANT_SECRET=your_xahau_wallet_secret<br>set EV_USER_PRIVATE_KEY=your_private_key_from_step2</code>
                            <button onclick="copyCode('set EV_TENANT_SECRET=your_xahau_wallet_secret\nset EV_USER_PRIVATE_KEY=your_private_key_from_step2')" style="position: absolute; right: 10px; top: 10px; background: rgba(0,255,136,0.2); border: 1px solid #00ff88; color: #00ff88; padding: 5px 10px; border-radius: 5px; cursor: pointer; font-size: 0.8rem;">📋 Copy</button>
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <strong style="color: #ffffff;">Mac/Linux (Terminal):</strong>
                        <div style="background: #1a1a1a; border-radius: 8px; padding: 15px; margin: 8px 0; position: relative; font-family: 'Courier New', monospace; color: #00ff88; font-size: 0.9rem;">
                            <code>export EV_TENANT_SECRET="your_xahau_wallet_secret"<br>export EV_USER_PRIVATE_KEY="your_private_key_from_step2"</code>
                            <button onclick="copyCode('export EV_TENANT_SECRET=\"your_xahau_wallet_secret\"\nexport EV_USER_PRIVATE_KEY=\"your_private_key_from_step2\"')" style="position: absolute; right: 10px; top: 10px; background: rgba(0,255,136,0.2); border: 1px solid #00ff88; color: #00ff88; padding: 5px 10px; border-radius: 5px; cursor: pointer; font-size: 0.8rem;">📋 Copy</button>
                        </div>
                    </div>
                    
                    <p style="margin: 0; font-size: 0.9rem; opacity: 0.8;">Replace with your actual Xahau wallet secret (with EVR tokens) and private key from step 2</p>
                </div>

                <!-- Step 4: Deploy -->
                <div style="background: rgba(255,255,255,0.1); border-radius: 15px; padding: 25px; margin-bottom: 20px; border-left: 5px solid #3b82f6;">
                    <div style="display: flex; align-items: center; margin-bottom: 15px;">
                        <div style="background: #3b82f6; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 15px; font-weight: bold;">4</div>
                        <h3 style="margin: 0; color: #3b82f6;">Deploy to This Host</h3>
                    </div>
                    <div style="background: #1a1a1a; border-radius: 8px; padding: 15px; margin-bottom: 10px; position: relative; font-family: 'Courier New', monospace; color: #00ff88; word-break: break-all;">
                        <code>evdevkit acquire <span id="deploy-host-address">loading...</span> -i your-app:latest -m 24</code>
                        <button onclick="copyDeployCommand()" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: rgba(0,255,136,0.2); border: 1px solid #00ff88; color: #00ff88; padding: 5px 10px; border-radius: 5px; cursor: pointer; font-size: 0.8rem;">📋 Copy</button>
                    </div>
                    <p style="margin: 0; font-size: 0.9rem; opacity: 0.8;">Deploy your Docker image directly to this Enhanced Evernode host using XRPL address<br><em>(-m 24 = 24 moments ≈ 24 hours runtime)</em></p>
                </div>
            </div>

            <!-- EVR Pricing Display -->
            <div style="text-align: center; margin-top: 40px;">
                <h3 style="color: #3b82f6; margin-bottom: 20px;">💰 Transparent EVR Pricing</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; max-width: 600px; margin: 0 auto 30px;">
                    <div style="background: rgba(255,255,255,0.1); border-radius: 10px; padding: 15px; text-align: center;">
                        <div style="font-size: 1rem; font-weight: 600; margin-bottom: 8px;">💻 Light</div>
                        <div style="font-size: 1.4rem; font-weight: 700; color: #3b82f6;" id="light-evr-rate">0.00001 EVR</div>
                        <div style="font-size: 0.8rem; opacity: 0.7;">per hour</div>
                        <div style="font-size: 0.7rem; opacity: 0.6;" id="light-usd-rate">~$0.000002/hr</div>
                    </div>
                    <div style="background: rgba(255,255,255,0.1); border-radius: 10px; padding: 15px; text-align: center;">
                        <div style="font-size: 1rem; font-weight: 600; margin-bottom: 8px;">🚀 Standard</div>
                        <div style="font-size: 1.4rem; font-weight: 700; color: #3b82f6;" id="standard-evr-rate">0.005 EVR</div>
                        <div style="font-size: 0.8rem; opacity: 0.7;">per hour</div>
                        <div style="font-size: 0.7rem; opacity: 0.6;" id="standard-usd-rate">~$0.0009/hr</div>
                    </div>
                    <div style="background: rgba(255,255,255,0.1); border-radius: 10px; padding: 15px; text-align: center;">
                        <div style="font-size: 1rem; font-weight: 600; margin-bottom: 8px;">⚡ Premium</div>
                        <div style="font-size: 1.4rem; font-weight: 700; color: #3b82f6;" id="premium-evr-rate">0.02 EVR</div>
                        <div style="font-size: 0.8rem; opacity: 0.7;">per hour</div>
                        <div style="font-size: 0.7rem; opacity: 0.6;" id="premium-usd-rate">~$0.003/hr</div>
                    </div>
                </div>
                
                <div style="background: rgba(0,255,136,0.1); border: 1px solid rgba(0,255,136,0.3); border-radius: 10px; padding: 15px; margin-bottom: 20px; display: inline-block; position: relative;">
                    <div style="font-size: 0.9rem; font-weight: 600; color: #00ff88; margin-bottom: 5px;">Current EVR Rate</div>
                    <div style="font-size: 1.2rem; font-weight: 700; color: #00ff88;" id="current-evr-usd">$0.172 USD</div>
                    <div style="font-size: 0.8rem; opacity: 0.8;" id="evr-source-info">Live from Evernode Network API</div>
                    <button onclick="forceRefreshEVRPrice()" style="position: absolute; top: 8px; right: 8px; background: rgba(0,255,136,0.2); border: 1px solid rgba(0,255,136,0.5); color: #00ff88; padding: 3px 6px; border-radius: 4px; cursor: pointer; font-size: 0.7rem;" title="Refresh EVR Price">🔄</button>
                </div>
                
                <p style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 20px;">
                    ✅ No setup fees • ✅ No monthly minimums • ✅ Cancel anytime • ✅ Automatic deployment
                </p>
                
                <a href="/cluster/roi-calculator.html" class="btn btn-primary">
                    📊 Calculate Your Exact Costs
                </a>
            </div>
        </div>
    </section>

    <!-- Premium Cluster Manager CTA -->
    <section style="padding: 60px 20px; background: rgba(102, 102, 246, 0.1);">
        <div class="container">
            <div class="premium-cta">
                <h3 style="color: #ffffff; margin-bottom: 15px;">🚀 Upgrade to Premium Cluster Manager</h3>
                <p style="margin-bottom: 20px; opacity: 0.9;">Advanced dApp deployment, scaling, and management for professional developers</p>
                <div style="margin: 20px 0;">
                    <span style="font-size: 1.3rem; font-weight: 700; color: #00ff88;">$49.99 One-Time Fee</span>
                    <span style="margin: 0 10px;">•</span>
                    <span style="opacity: 0.8;">Lifetime access to premium features</span>
                </div>
                <a href="#" class="btn btn-primary premium-cluster-link" data-commission-source="main-cta" style="margin-right: 10px;">
                    🎯 Get Premium Access
                </a>
                <a href="#" class="btn btn-secondary coming-soon" onclick="showComingSoon()">
                    🎮 Try Demo First
                </a>
                <div style="font-size: 0.9rem; margin-top: 15px; opacity: 0.8;" class="admin-only">
                    ✨ Enhanced hosts earn <strong style="color: #00ff88;">$10.00</strong> per successful referral
                </div>
                <div style="font-size: 0.85rem; margin-top: 8px; opacity: 0.7;" class="admin-only">
                    🚀 Plus future recurring commissions on subscription features!
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features-section">
        <div class="container">
            <h2 class="section-title">🎯 Professional Features</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <span class="feature-icon">🔧</span>
                    <h3 class="feature-title">Advanced Cluster Management</h3>
                    <p class="feature-description">
                        One-click deployments, automatic scaling, and professional monitoring 
                        with enterprise-grade container orchestration.
                    </p>
                </div>
                
                <div class="feature-card">
                    <span class="feature-icon">💰</span>
                    <h3 class="feature-title">Transparent EVR Pricing</h3>
                    <p class="feature-description">
                        Pay-as-you-use model with real-time EVR pricing from Evernode network. 
                        No hidden fees, no minimums, cancel anytime.
                    </p>
                </div>
                
                <div class="feature-card">
                    <span class="feature-icon">📊</span>
                    <h3 class="feature-title">Real-Time Analytics</h3>
                    <p class="feature-description">
                        Live performance metrics, resource usage tracking, and comprehensive 
                        reporting with automated insights and alerts.
                    </p>
                </div>
                
                <div class="feature-card admin-only">
                    <span class="feature-icon">💸</span>
                    <h3 class="feature-title">$10 Per Referral + Future Subscriptions</h3>
                    <p class="feature-description">
                        Earn $10.00 on every $49.99 premium sale, plus recurring commissions 
                        on future subscription features once the dApp is live.
                    </p>
                </div>
                
                <div class="feature-card">
                    <span class="feature-icon">🚀</span>
                    <h3 class="feature-title">Professional Interface</h3>
                    <p class="feature-description">
                        Modern design that builds tenant trust and increases 
                        bookings by 300% compared to basic hosts.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- User Flow Section -->
    <section style="padding: 60px 20px; background: rgba(0,0,0,0.4);">
        <div class="container">
            <h2 class="section-title">🗺️ Your Path to Success</h2>
            
            <!-- Tenant Flow -->
            <div class="tenant-only" style="background: rgba(59, 130, 246, 0.1); border-radius: 15px; padding: 40px;">
                <h3 style="color: #3b82f6; text-align: center; margin-bottom: 30px; font-size: 1.5rem;">🚀 Deploy Your dApp</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; text-align: center;">
                    <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px;">
                        <div style="font-size: 2rem; margin-bottom: 10px;">1️⃣</div>
                        <h4 style="color: #3b82f6; margin-bottom: 10px;">Demo Coming Soon</h4>
                        <p style="font-size: 0.9rem; opacity: 0.9;">Full interface demo being prepared</p>
                    </div>
                    <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px;">
                        <div style="font-size: 2rem; margin-bottom: 10px;">2️⃣</div>
                        <h4 style="color: #3b82f6; margin-bottom: 10px;">Calculate</h4>
                        <p style="font-size: 0.9rem; opacity: 0.9;">Use <a href="/cluster/roi-calculator.html" style="color: #00ff88;">ROI Calculator</a> for exact costs</p>
                    </div>
                    <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px;">
                        <div style="font-size: 2rem; margin-bottom: 10px;">3️⃣</div>
                        <h4 style="color: #3b82f6; margin-bottom: 10px;">Deploy</h4>
                        <p style="font-size: 0.9rem; opacity: 0.9;">Follow the 4-step deployment process</p>
                    </div>
                </div>
            </div>
            
            <!-- Host Flow -->
            <div class="admin-only" style="background: rgba(16, 185, 129, 0.1); border-radius: 15px; padding: 40px;">
                <h3 style="color: #10b981; text-align: center; margin-bottom: 30px; font-size: 1.5rem;">💰 Maximize Your Revenue</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; text-align: center;">
                    <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px;">
                        <div style="font-size: 2rem; margin-bottom: 10px;">1️⃣</div>
                        <h4 style="color: #10b981; margin-bottom: 10px;">Demo</h4>
                        <p style="font-size: 0.9rem; opacity: 0.9;">Cluster management demo coming soon</p>
                    </div>
                    <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px;">
                        <div style="font-size: 2rem; margin-bottom: 10px;">2️⃣</div>
                        <h4 style="color: #10b981; margin-bottom: 10px;">Monitor</h4>
                        <p style="font-size: 0.9rem; opacity: 0.9;">Track <a href="/monitoring-dashboard.html" style="color: #00ff88;">system performance</a> and health</p>
                    </div>
                    <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px;">
                        <div style="font-size: 2rem; margin-bottom: 10px;">3️⃣</div>
                        <h4 style="color: #10b981; margin-bottom: 10px;">Earn</h4>
                        <p style="font-size: 0.9rem; opacity: 0.9;">View <a href="/my-earnings.html" style="color: #00ff88;">earnings</a> and commissions</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Quick Access Cards -->
    <section class="quick-access">
        <div class="container">
            <h2 class="section-title">⚡ Quick Access</h2>
            <div class="access-grid">
                <!-- Demo - Coming Soon -->
                <a href="#" class="access-card coming-soon" onclick="showComingSoon()" style="border: 2px solid #fbbf24; background: rgba(251,191,36,0.1);">
                    <span class="access-icon">🎮</span>
                    <div class="access-title" style="color: #fbbf24;">Launch Demo</div>
                    <div class="access-description">Full cluster management interface</div>
                </a>
                
                <!-- Host Discovery - Always visible -->
                <a href="/host-discovery.html" class="access-card">
                    <span class="access-icon">🔍</span>
                    <div class="access-title">Host Discovery</div>
                    <div class="access-description">Find and compare enhanced hosts</div>
                </a>
                
                <!-- Tenant Calculator -->
                <a href="/cluster/roi-calculator.html" class="access-card tenant-only">
                    <span class="access-icon">📊</span>
                    <div class="access-title">ROI Calculator</div>
                    <div class="access-description">Calculate deployment costs and savings</div>
                </a>
                
                <!-- Admin Monitoring -->
                <a href="/monitoring-dashboard.html" class="access-card admin-only">
                    <span class="access-icon">📊</span>
                    <div class="access-title">Host Monitoring</div>
                    <div class="access-description">Real-time system monitoring</div>
                </a>
                
                <!-- Admin Earnings -->
                <a href="/my-earnings.html" class="access-card admin-only">
                    <span class="access-icon">💰</span>
                    <div class="access-title">My Earnings</div>
                    <div class="access-description">Track revenue and commissions</div>
                </a>
                
                <!-- Always visible - Upgrade path -->
                <a href="#" class="access-card premium-cluster-link" data-commission-source="quick-access" style="border: 1px solid #3b82f6;">
                    <span class="access-icon">💎</span>
                    <div class="access-title">Premium Upgrade</div>
                    <div class="access-description">Unlock advanced cluster features</div>
                </a>
            </div>
        </div>
    </section>

    <!-- Final Call to Action -->
    <section style="padding: 80px 20px; background: linear-gradient(135deg, rgba(0,255,136,0.1) 0%, rgba(59,130,246,0.1) 100%);">
        <div class="container" style="text-align: center;">
            <h2 class="section-title">🚀 Ready to Get Started?</h2>
            
            <div class="tenant-only">
                <p style="font-size: 1.2rem; margin-bottom: 40px; opacity: 0.9;">
                    Deploy your first dApp in minutes with transparent EVR pricing
                </p>
                <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
                    <a href="#" class="btn btn-primary coming-soon" onclick="showComingSoon()" style="font-size: 1.1rem; padding: 18px 35px;">
                        🎮 Try Demo First
                    </a>
                    <a href="#tenant-deploy" onclick="scrollToTenantSection()" class="btn btn-secondary">
                        📋 View Deployment Steps
                    </a>
                    <a href="/cluster/roi-calculator.html" class="btn btn-outline">
                        💰 Calculate Costs
                    </a>
                </div>
            </div>
            
            <div class="admin-only">
                <p style="font-size: 1.2rem; margin-bottom: 40px; opacity: 0.9;">
                    Transform your host into a premium service with 300% more bookings + $10 per referral income
                </p>
                <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
                    <a href="#" class="btn btn-primary coming-soon" onclick="showComingSoon()" style="font-size: 1.1rem; padding: 18px 35px;">
                        🎮 Try Full Demo
                    </a>
                    <a href="/cluster/dapp-manager.html" class="btn btn-secondary">
                        🏗️ Cluster Manager
                    </a>
                    <a href="/monitoring-dashboard.html" class="btn btn-outline">
                        📊 Monitor Host
                    </a>
                </div>
            </div>
        </div>
    </section>

    <script>
        // User Role Detection
        function detectUserRole() {
            // Default to tenant mode for now
            let currentRole = 'tenant';
            
            // Check for admin access via URL parameter or localStorage
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('admin') === 'true' || localStorage.getItem('admin_mode') === 'true') {
                currentRole = 'admin';
            }
            
            updateUIForRole(currentRole);
        }

        function updateUIForRole(role) {
            const roleIndicator = document.getElementById('role-indicator');
            const roleBanner = document.getElementById('role-banner');
            
            // Hide all role-specific content first
            document.querySelectorAll('.tenant-only, .admin-only, .demo-only').forEach(element => {
                element.style.display = 'none';
            });
            
            if (role === 'admin') {
                roleIndicator.textContent = 'Host Admin';
                roleIndicator.style.background = 'rgba(16, 185, 129, 0.2)';
                roleIndicator.style.color = '#10b981';
                
                // Show admin content
                document.querySelectorAll('.admin-only').forEach(element => {
                    element.style.display = element.dataset.originalDisplay || 'block';
                });
                
                // Show role banner
                roleBanner.style.display = 'block';
                roleBanner.innerHTML = '🎯 Host Admin Mode - Earn $10 per referral + manage your enhanced host';
                
                // Initialize commission manager for admins
                setTimeout(() => new CommissionManager(), 1000);
                
            } else {
                roleIndicator.textContent = 'Tenant Mode';
                roleIndicator.style.background = 'rgba(59, 130, 246, 0.2)';
                roleIndicator.style.color = '#3b82f6';
                
                // Show tenant content
                document.querySelectorAll('.tenant-only').forEach(element => {
                    element.style.display = element.dataset.originalDisplay || 'block';
                });
            }
        }

        function toggleAdminMode() {
            const isAdmin = localStorage.getItem('admin_mode') === 'true';
            if (isAdmin) {
                localStorage.removeItem('admin_mode');
                updateUIForRole('tenant');
                console.log('Switched to tenant mode');
            } else {
                localStorage.setItem('admin_mode', 'true');
                updateUIForRole('admin');
                console.log('Switched to admin mode');
            }
        }

        // Commission Management Class
        class CommissionManager {
            constructor() {
                this.hostId = window.location.hostname;
                this.referralCode = this.generateReferralCode();
                this.paymentServer = 'https://payments.evrdirect.info';
                this.apiServer = 'https://api.evrdirect.info';
                this.init();
            }

            init() {
                this.loadCommissionStats();
                this.setupReferralLinks();
                this.trackReferrals();
            }

            generateReferralCode() {
                const hostDomain = window.location.hostname;
                return btoa(hostDomain).substr(0, 8).toUpperCase();
            }

            setupReferralLinks() {
                const referralParam = `?ref=${this.referralCode}&host=${this.hostId}&wallet=HOST_WALLET_PLACEHOLDER`;
                const fullReferralUrl = this.paymentServer + referralParam;
                
                // Update all premium cluster manager links
                document.querySelectorAll('.premium-cluster-link, .btn-primary[href*="premium"], .btn[href*="paywall"], a[href*="cluster"]').forEach(link => {
                    if (link.textContent.includes('Premium') || link.textContent.includes('Upgrade') || link.href.includes('cluster')) {
                        link.href = fullReferralUrl;
                        link.target = '_blank';
                    }
                });
                
                // Display referral link for sharing
                this.displayReferralWidget();
            }

            displayReferralWidget() {
                const widget = document.getElementById('commission-widget');
                if (widget) {
                    const referralUrl = `https://premium-cluster-manager.evernode.com?ref=${this.referralCode}&host=${this.hostId}`;
                    
                    widget.innerHTML = `
                        <h3 style="color: #00ff88; margin-bottom: 20px;">💰 Earn $10 Per Referral + Future Subscriptions</h3>
                        <p style="margin-bottom: 20px; opacity: 0.9;">Share your referral link and earn 20% commission on the $49.99 one-time fee, plus recurring commissions on future subscriptions!</p>
                        
                        <div class="referral-link-box">
                            <label style="display: block; margin-bottom: 8px; font-weight: 600;">Your Referral Link:</label>
                            <input type="text" value="${referralUrl}" readonly onclick="this.select()" 
                                   style="width: 100%; padding: 12px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 5px; color: white; font-family: monospace;">
                            <button onclick="copyReferralLink('${referralUrl}')" class="btn btn-primary" style="margin-top: 10px;">
                                📋 Copy Referral Link
                            </button>
                        </div>
                        
                        <div class="commission-stats" id="commission-stats">
                            <div class="commission-stat">
                                <div class="commission-amount" id="total-commissions">$0.00</div>
                                <div style="opacity: 0.8;">Total Earned</div>
                            </div>
                            <div class="commission-stat">
                                <div class="commission-amount" id="referral-count">0</div>
                                <div style="opacity: 0.8;">One-Time Sales</div>
                            </div>
                            <div class="commission-stat">
                                <div class="commission-amount" id="conversion-rate">0%</div>
                                <div style="opacity: 0.8;">Conversion Rate</div>
                            </div>
                            <div class="commission-stat">
                                <div class="commission-amount" id="monthly-earnings">$0.00</div>
                                <div style="opacity: 0.8;">This Month</div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 20px; padding: 15px; background: rgba(0,255,136,0.1); border-radius: 8px; font-size: 0.9rem;">
                            💡 <strong>Commission Structure:</strong><br>
                            • <strong>$10.00</strong> per one-time sale ($49.99 × 20%)<br>
                            • <strong>Future subscriptions:</strong> 20% recurring commissions once dApp is live<br>
                            • <strong>No limits</strong> on referrals<br>
                            • Automatic tracking & payments
                        </div>
                        
                        <div style="margin-top: 15px; padding: 12px; background: rgba(59,130,246,0.1); border-radius: 8px; font-size: 0.85rem; border-left: 3px solid #3b82f6;">
                            🚀 <strong>Coming Soon:</strong> Monthly subscription features will unlock additional recurring commission opportunities!
                        </div>
                    `;
                }
            }

            async loadCommissionStats() {
                try {
                    const response = await fetch(`${this.apiServer}/api/host-earnings/${this.hostId}`);
                    const data = await response.json();
                    
                    if (data.success) {
                        this.updateCommissionDisplay(data.earnings);
                    } else {
                        throw new Error('No earnings data');
                    }
                } catch (error) {
                    console.log('📡 Centralized earnings API unavailable - showing placeholder');
                    this.showPlaceholderEarnings();
                }
            }

            showPlaceholderEarnings() {
                // Only show $0 when API unavailable - no fake earnings
                const elements = {
                    'total-commissions': '$0.00',
                    'referral-count': '0',
                    'monthly-earnings': '$0.00'
                };
                
                Object.entries(elements).forEach(([id, value]) => {
                    const element = document.getElementById(id);
                    if (element) element.textContent = value;
                });
            }

            updateCommissionDisplay(stats) {
                const elements = {
                    'total-commissions': `$${stats.total_earned?.toFixed(2) || '0.00'}`,
                    'referral-count': stats.referral_count || 0,
                    'conversion-rate': `${stats.conversion_rate || 0}%`,
                    'monthly-earnings': `$${stats.monthly_earnings?.toFixed(2) || '0.00'}`
                };

                Object.entries(elements).forEach(([id, value]) => {
                    const element = document.getElementById(id);
                    if (element) element.textContent = value;
                });
            }

            trackReferrals() {
                document.querySelectorAll('.premium-cluster-link').forEach(link => {
                    link.addEventListener('click', () => {
                        const source = link.getAttribute('data-commission-source') || 'unknown';
                        
                        // Track referral click
                        fetch('/api/track-referral.php', {
                            method: 'POST',
                            headers: {'Content-Type': 'application/json'},
                            body: JSON.stringify({
                                host_id: this.hostId,
                                referral_code: this.referralCode,
                                action: 'click',
                                source: source,
                                commission_rate: 20
                            })
                        }).catch(err => console.log('Tracking failed:', err));
                    });
                });
            }
        }

        // Coming Soon functionality
        function showComingSoon() {
            alert('🚀 Demo Coming Soon!\n\nWe\'re putting the finishing touches on the interactive demo. It will showcase:\n\n• Live cluster management interface\n• Real deployment examples\n• Interactive cost calculator\n• Host monitoring dashboard\n\nCheck back soon or use the ROI Calculator in the meantime!');
        }

        // Copy referral link function
        function copyReferralLink(url) {
            navigator.clipboard.writeText(url).then(() => {
                alert('✅ Referral link copied! Share it to earn 20% commission on premium cluster sales.');
            }).catch(err => {
                console.error('Failed to copy: ', err);
            });
        }

        // Commission calculator
        document.addEventListener('DOMContentLoaded', function() {
            const referralCountInput = document.getElementById('referral-count');
            if (referralCountInput) {
                referralCountInput.addEventListener('input', function() {
                    const count = this.value || 0;
                    const commission = 10.00; // $49.99 × 20% = $10.00 per sale
                    const monthly = (count * commission).toFixed(2);
                    const potentialElement = document.getElementById('monthly-potential');
                    if (potentialElement) {
                        potentialElement.textContent = `$${monthly}/month`;
                    }
                });
            }
        });

        // Real-time stats updates - Enhanced with host wallet
        async function updateRealTimeStats() {
            let isRealData = false;
            
            try {
                // Update data source indicator
                updateDataSourceIndicator('🔄 Fetching live data from host APIs...', '#3b82f6');
                
                // Try the unified API router first
                let response = await fetch('/api/?endpoint=instance-count');
                let data = await response.json();
                
                // If that fails, try direct endpoint
                if (!data.success) {
                    response = await fetch('/api/instance-count.php');
                    data = await response.json();
                }
                
                // If still no success, try router.php
                if (!data.success) {
                    response = await fetch('/api/router.php?endpoint=instance-count');
                    data = await response.json();
                }
                
                if (data.success && data.total !== undefined) {
                    isRealData = true;
                    
                    // Update data source indicator to show real data
                    updateDataSourceIndicator('✅ Live data from host APIs', '#00ff88');
                    
                    // Use real data from your API
                    document.getElementById('instance-count').textContent = data.used + '/' + data.total;
                    document.getElementById('availability').textContent = data.available + ' slots';
                    
                    // Calculate hourly rate from lease amount if available
                    let rateText = 'Loading...';
                    if (data.host_info && data.host_info.lease_amount) {
                        rateText = data.host_info.lease_amount;
                    } else if (data.debug_info && data.debug_info.lease_output) {
                        // Extract rate from lease output
                        const rateMatch = data.debug_info.lease_output.match(/(\d+\.?\d*)\s*EVR/);
                        if (rateMatch) {
                            rateText = rateMatch[1] + ' EVR/hr';
                        }
                    } else {
                        rateText = '0.005 EVR/hr';
                    }
                    
                    document.getElementById('revenue').textContent = rateText;
                    
                    // Update status indicator
                    const statusElement = document.getElementById('host-status');
                    if (statusElement) {
                        let statusText = data.status_message || data.status || 'Available';
                        statusElement.textContent = statusText;
                        
                        // Color code the status
                        if (data.status === 'available') {
                            statusElement.style.color = '#00ff88';
                        } else if (data.status === 'limited') {
                            statusElement.style.color = '#fbbf24';
                        } else if (data.status === 'full') {
                            statusElement.style.color = '#ef4444';
                        } else {
                            statusElement.style.color = '#ffffff';
                        }
                    }
                    
                    // Update timestamp
                    const timestampElement = document.getElementById('stats-timestamp');
                    if (timestampElement) {
                        const updateTime = data.last_updated || new Date().toLocaleTimeString();
                        timestampElement.textContent = updateTime + ' (live)';
                    }
                    
                    console.log('✅ Real stats updated from API:', {
                        total: data.total,
                        used: data.used,
                        available: data.available,
                        status: data.status,
                        source: 'live_api'
                    });
                    
                } else {
                    throw new Error('All API endpoints failed or returned no data');
                }
                
            } catch (error) {
                console.log('⚠️ Live APIs unavailable, using demo stats. Error:', error.message);
                updateDemoStats();
            }
            
            // Always try to load host info for wallet address
            await loadHostInfo();
        }

        // Load host information including wallet address
        async function loadHostInfo() {
            try {
                // Try to get host info from API
                let response = await fetch('/api/host-info.php');
                let data = await response.json();
                
                // If that fails, try unified API
                if (!data.xahau_address) {
                    response = await fetch('/api/?endpoint=host-info');
                    data = await response.json();
                }
                
                if (data.xahau_address && data.xahau_address !== 'rUnknownAddress') {
                    // Real wallet address from API
                    document.getElementById('host-wallet').textContent = data.xahau_address;
                    console.log('✅ Real host wallet loaded:', data.xahau_address);
                } else {
                    throw new Error('No valid wallet address in API response');
                }
                
            } catch (error) {
                // Fallback: try to detect current host domain and show placeholder
                const currentHost = window.location.hostname;
                document.getElementById('host-wallet').textContent = 'rLoadingHostWallet...';
                console.log('⚠️ Could not load real wallet address, showing placeholder');
            }
        }

        // Update data source indicator
        function updateDataSourceIndicator(text, color) {
            const indicator = document.getElementById('data-source-indicator');
            if (indicator) {
                indicator.textContent = text;
                indicator.style.color = color;
            }
        }

        // Improved demo stats with clear demo indicators
        function updateDemoStats() {
            try {
                // Update data source indicator to show demo data
                updateDataSourceIndicator('⚠️ Demo data - APIs unavailable', '#fbbf24');
                
                // Fallback demo data when APIs are unavailable
                const timestamp = Date.now();
                const variation = Math.sin(timestamp / 60000); // Slow variation
                const instances = Math.max(1, Math.floor(3 + variation * 2)); // 1-5 instances
                const total = 5;
                const used = Math.min(instances, total);
                const available = Math.max(0, total - used);
                
                // Update displays with proper error handling
                const elements = {
                    'instance-count': `${used}/${total}`,
                    'availability': `${available} slots`,
                    'revenue': '0.005 EVR/hr'
                };
                
                Object.entries(elements).forEach(([id, value]) => {
                    const element = document.getElementById(id);
                    if (element) element.textContent = value;
                });
                
                // Update status indicator with demo data
                const statusElement = document.getElementById('host-status');
                if (statusElement) {
                    if (available > 2) {
                        statusElement.textContent = '✅ Ready for new deployments! (demo)';
                        statusElement.style.color = '#00ff88';
                    } else if (available > 0) {
                        statusElement.textContent = '⚡ Limited slots available (demo)';
                        statusElement.style.color = '#fbbf24';
                    } else {
                        statusElement.textContent = '🔴 Currently at capacity (demo)';
                        statusElement.style.color = '#ef4444';
                    }
                }
                
                // Update timestamp
                const timestampElement = document.getElementById('stats-timestamp');
                if (timestampElement) {
                    timestampElement.textContent = new Date().toLocaleTimeString() + ' (demo)';
                }
                
                console.log('⚠️ Using demo stats - Live APIs unavailable');
                
            } catch (error) {
                console.error('Error in demo stats:', error);
                // Fallback to static display if even demo fails
                updateDataSourceIndicator('❌ Error loading data', '#ef4444');
                document.getElementById('instance-count').textContent = '3/5';
                document.getElementById('availability').textContent = '2 slots';
                document.getElementById('revenue').textContent = '0.005 EVR/hr';
                document.getElementById('host-status').textContent = '✅ Ready for new deployments! (static)';
            }
        }

        // Copy host wallet address function
        function copyHostWallet() {
            const walletElement = document.getElementById('host-wallet');
            const walletAddress = walletElement.textContent;
            
            if (walletAddress && walletAddress !== 'Loading...' && walletAddress !== 'rLoadingHostWallet...') {
                navigator.clipboard.writeText(walletAddress).then(() => {
                    // Show feedback
                    const originalText = walletElement.textContent;
                    walletElement.textContent = '✅ Copied!';
                    walletElement.style.color = '#00ff88';
                    
                    setTimeout(() => {
                        walletElement.textContent = originalText;
                        walletElement.style.color = '#ffffff';
                    }, 2000);
                }).catch(err => {
                    console.error('Failed to copy wallet address: ', err);
                    alert('Failed to copy wallet address. Please copy manually: ' + walletAddress);
                });
            } else {
                alert('Wallet address not loaded yet. Please wait and try again.');
            }
        }

        // EVR Price Management
        const EVR_CACHE_KEY = 'evr_price_cache';
        const CACHE_DURATION = 5 * 60 * 1000; // 5 minutes

        function getCachedEVRPrice() {
            try {
                const cached = localStorage.getItem(EVR_CACHE_KEY);
                if (cached) {
                    const data = JSON.parse(cached);
                    const now = Date.now();
                    
                    if (now - data.timestamp < CACHE_DURATION) {
                        return data;
                    }
                }
                return null;
            } catch (error) {
                console.error('Error reading EVR price cache:', error);
                return null;
            }
        }

        function setCachedEVRPrice(priceData) {
            try {
                const cacheData = {
                    ...priceData,
                    timestamp: Date.now(),
                    cached_at: new Date().toISOString()
                };
                localStorage.setItem(EVR_CACHE_KEY, JSON.stringify(cacheData));
            } catch (error) {
                console.error('Error saving EVR price cache:', error);
            }
        }

        // Load real EVR pricing from official Evernode API
        async function loadEVRPricing() {
            try {
                // Check cache first
                const cached = getCachedEVRPrice();
                if (cached) {
                    console.log('Using cached EVR price:', cached.currentPrice);
                    updatePricingDisplay(cached.currentPrice, true);
                    return;
                }

                // Fetch from official Evernode API
                console.log('Fetching fresh EVR price from Evernode API...');
                const response = await fetch('https://api.evernode.network/supply/money', {
                    method: 'GET',
                    headers: {
                        'accept': '*/*'
                    }
                });
                
                if (!response.ok) {
                    throw new Error(`API responded with status: ${response.status}`);
                }
                
                const data = await response.json();
                
                if (data && typeof data.currentPrice === 'number') {
                    console.log('Evernode API Response:', {
                        currentPrice: data.currentPrice,
                        marketCap: data.mc,
                        circulating: data.circulating,
                        timestamp: new Date(data.timestamp).toISOString()
                    });
                    
                    // Cache the result
                    setCachedEVRPrice(data);
                    
                    // Update display
                    updatePricingDisplay(data.currentPrice, false);
                    
                    console.log('EVR price updated:', data.currentPrice, 'USD');
                } else {
                    throw new Error('Invalid API response format');
                }
                
            } catch (error) {
                console.error('Failed to load EVR pricing:', error);
                
                // Try to use cached data even if expired
                const cached = getCachedEVRPrice();
                if (cached) {
                    console.log('Using expired cache as fallback');
                    updatePricingDisplay(cached.currentPrice, true);
                } else {
                    // Fallback to default
                    console.log('Using fallback price: $0.172');
                    updatePricingDisplay(0.172, false);
                }
            }
        }

        function updatePricingDisplay(evrUSD, fromCache = false) {
            try {
                // Update current EVR rate display
                document.getElementById('current-evr-usd').textContent = `$${evrUSD.toFixed(3)} USD`;
                
                // Update source info
                const sourceInfo = document.getElementById('evr-source-info');
                if (fromCache) {
                    const cached = getCachedEVRPrice();
                    const cacheTime = cached ? new Date(cached.cached_at).toLocaleTimeString() : 'unknown';
                    sourceInfo.textContent = `Cached (${cacheTime})`;
                    sourceInfo.style.opacity = '0.6';
                } else {
                    sourceInfo.textContent = 'Live from Evernode Network API';
                    sourceInfo.style.opacity = '0.8';
                }
                
                // Calculate and update USD equivalents for each tier
                const lightUSD = (0.00001 * evrUSD).toFixed(6);
                const standardUSD = (0.005 * evrUSD).toFixed(4);
                const premiumUSD = (0.02 * evrUSD).toFixed(4);
                
                // Update pricing displays
                document.getElementById('light-usd-rate').textContent = `~$${lightUSD}/hr`;
                document.getElementById('standard-usd-rate').textContent = `~$${standardUSD}/hr`;
                document.getElementById('premium-usd-rate').textContent = `~$${premiumUSD}/hr`;
                
                // Update hero section cost
                const heroUSDCost = (0.005 * evrUSD).toFixed(4);
                document.getElementById('hero-usd-cost').textContent = `~$${heroUSDCost}/hr for standard dApps`;
                
                console.log(`Pricing updated - Light: $${lightUSD}/hr, Standard: $${standardUSD}/hr, Premium: $${premiumUSD}/hr`);
                
            } catch (error) {
                console.error('Error updating pricing display:', error);
            }
        }

        // Force refresh functions
        async function forceRefreshStats() {
            try {
                // Show loading state
                updateDataSourceIndicator('🔄 Force refreshing...', '#3b82f6');
                document.getElementById('instance-count').textContent = 'Loading...';
                document.getElementById('availability').textContent = 'Loading...';
                document.getElementById('revenue').textContent = 'Loading...';
                document.getElementById('host-status').textContent = 'Refreshing...';
                document.getElementById('stats-timestamp').textContent = 'Updating...';
                document.getElementById('host-wallet').textContent = 'Loading...';
                
                // Force fresh load
                await updateRealTimeStats();
                
            } catch (error) {
                console.error('Error forcing stats refresh:', error);
                updateDataSourceIndicator('❌ Refresh failed', '#ef4444');
                document.getElementById('host-status').textContent = 'Refresh failed - using demo data';
                updateDemoStats();
            }
        }

        async function forceRefreshEVRPrice() {
            try {
                // Clear cache first
                localStorage.removeItem(EVR_CACHE_KEY);
                
                // Show loading state
                document.getElementById('current-evr-usd').textContent = 'Loading...';
                document.getElementById('evr-source-info').textContent = 'Fetching fresh data...';
                
                // Force fresh load
                await loadEVRPricing();
                
            } catch (error) {
                console.error('Error forcing EVR price refresh:', error);
                document.getElementById('evr-source-info').textContent = 'Refresh failed';
            }
        }

        // Load current host XRPL address for deployment
        async function loadHostAddress() {
            try {
                // Try to get the host's XRPL address from the API
                let response = await fetch('/api/host-info.php');
                let data = await response.json();
                
                // If that fails, try unified API
                if (!data.xrpl_address && !data.xahau_address) {
                    response = await fetch('/api/?endpoint=host-info');
                    data = await response.json();
                }
                
                // Use XRPL address for deployment command
                let hostAddress = data.xrpl_address || data.xahau_address || data.host_address;
                
                if (hostAddress && hostAddress.startsWith('r') && hostAddress.length > 20) {
                    // Valid XRPL address found
                    document.getElementById('deploy-host-address').textContent = hostAddress;
                    console.log('✅ Loaded host XRPL address for deployment:', hostAddress);
                } else {
                    throw new Error('No valid XRPL address found in API response');
                }
                
            } catch (error) {
                console.error('Failed to load host XRPL address:', error);
                // Fallback to placeholder
                document.getElementById('deploy-host-address').textContent = 'rYourHostXRPLAddress';
                console.log('⚠️ Using placeholder XRPL address - replace with actual host address');
            }
        }

        // Scroll to sections
        function scrollToTenantSection() {
            document.getElementById('tenant-deploy').scrollIntoView({ 
                behavior: 'smooth',
                block: 'start'
            });
        }

        function scrollToHostSection() {
            document.getElementById('host-benefits').scrollIntoView({ 
                behavior: 'smooth',
                block: 'start'
            });
        }

        // Copy code function
        function copyCode(text) {
            navigator.clipboard.writeText(text).then(() => {
                console.log('Code copied to clipboard');
            }).catch(err => {
                console.error('Failed to copy: ', err);
            });
        }

        // Copy deployment command with real host XRPL address
        function copyDeployCommand() {
            const hostAddress = document.getElementById('deploy-host-address').textContent;
            const command = `evdevkit acquire ${hostAddress} -i your-app:latest -m 24`;
            copyCode(command);
        }

        // Keyboard shortcut for admin access (Ctrl+Shift+A)
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.shiftKey && e.key === 'A') {
                e.preventDefault();
                toggleAdminMode();
            }
        });

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            detectUserRole();
            updateRealTimeStats(); // This now includes loadHostInfo()
            loadHostAddress();
            loadEVRPricing();
            
            // Set up periodic updates
            setInterval(updateRealTimeStats, 30000); // Update every 30 seconds
            setInterval(loadEVRPricing, 300000);     // Update pricing every 5 minutes
        });
    </script>
</body>
</html>
