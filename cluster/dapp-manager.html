<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ Enhanced dApp Manager - Real-Time Host Management</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            color: #ffffff;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ffffff, #e0e7ff);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .tabs-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            overflow: hidden;
        }

        .tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .tab {
            padding: 16px 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            text-align: center;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tab:last-child {
            border-right: none;
        }

        .tab:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .tab.active {
            background: rgba(255, 255, 255, 0.2);
            border-bottom: 2px solid #00ff88;
        }

        .tab-content {
            display: none;
            padding: 30px;
        }

        .tab-content.active {
            display: block;
        }

        .overview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-4px);
        }

        .stat-icon {
            font-size: 2.5rem;
            margin-bottom: 12px;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .monitoring-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .panel {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
        }

        .panel-title {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .instance-grid {
            display: grid;
            gap: 15px;
        }

        .instance-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 16px;
        }

        .instance-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .instance-name {
            font-weight: 600;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .status-healthy { background: #00ff88; }
        .status-warning { background: #ffd700; }
        .status-critical { background: #ff4444; }

        .metrics-row {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-top: 12px;
        }

        .metric-item {
            text-align: center;
            padding: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 6px;
        }

        .metric-value {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .metric-label {
            font-size: 0.75rem;
            opacity: 0.7;
        }

        .logs-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 16px;
            height: 200px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 0.85rem;
            line-height: 1.4;
        }

        .log-line {
            margin: 4px 0;
            padding: 2px 0;
        }

        .log-info { color: #87ceeb; }
        .log-success { color: #90ee90; }
        .log-warning { color: #ffd700; }
        .log-error { color: #ff6b6b; }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: linear-gradient(45deg, #00ff88, #00cc70);
            color: #000;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 255, 136, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .deployment-form {
            display: grid;
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-label {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .form-input, .form-select {
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            font-size: 1rem;
        }

        .form-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .loading-spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #00ff88;
            animation: spin 1s ease-in-out infinite;
            margin-right: 8px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .alert {
            padding: 16px;
            border-radius: 8px;
            margin: 16px 0;
            border: 1px solid;
        }

        .alert-info {
            background: rgba(59, 130, 246, 0.1);
            border-color: rgba(59, 130, 246, 0.3);
            color: #60a5fa;
        }

        .alert-success {
            background: rgba(34, 197, 94, 0.1);
            border-color: rgba(34, 197, 94, 0.3);
            color: #4ade80;
        }

        .alert-warning {
            background: rgba(245, 158, 11, 0.1);
            border-color: rgba(245, 158, 11, 0.3);
            color: #fbbf24;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin: 8px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff88, #00cc70);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .live-indicator {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .pulse-dot {
            width: 8px;
            height: 8px;
            background: #00ff88;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.4; }
        }

        @media (max-width: 768px) {
            .monitoring-section {
                grid-template-columns: 1fr;
            }
            
            .overview-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .tabs {
                flex-wrap: wrap;
            }
            
            .tab {
                min-width: 50%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1 class="title">üöÄ Enhanced dApp Manager</h1>
            <p class="subtitle">Professional Evernode Host Management Platform</p>
            <div class="live-indicator">
                <div class="pulse-dot"></div>
                <span id="last-update">Live monitoring ‚Ä¢ Updated: --:--</span>
            </div>
        </div>

        <!-- Main Interface -->
        <div class="tabs-container">
            <!-- Tabs -->
            <div class="tabs">
                <div class="tab active" onclick="switchTab('overview')">
                    üìä Overview
                </div>
                <div class="tab" onclick="switchTab('monitor')">
                    üìà Monitor
                </div>
                <div class="tab" onclick="switchTab('deploy')">
                    üöÄ Deploy
                </div>
                <div class="tab" onclick="switchTab('analytics')">
                    üìä Analytics
                </div>
                <div class="tab" onclick="switchTab('settings')">
                    ‚öôÔ∏è Settings
                </div>
            </div>

            <!-- Overview Tab -->
            <div id="overview" class="tab-content active">
                <!-- Real-time Stats Grid -->
                <div class="overview-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üñ•Ô∏è</div>
                        <div class="stat-value" id="cpu-usage">--</div>
                        <div class="stat-label">CPU Usage</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="cpu-progress" style="width: 0%;"></div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">üß†</div>
                        <div class="stat-value" id="memory-usage">--</div>
                        <div class="stat-label">Memory Usage</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="memory-progress" style="width: 0%;"></div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">üíæ</div>
                        <div class="stat-value" id="disk-usage">--</div>
                        <div class="stat-label">Disk Usage</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="disk-progress" style="width: 0%;"></div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">üê≥</div>
                        <div class="stat-value" id="container-count">--</div>
                        <div class="stat-label">Active Containers</div>
                        <div style="font-size: 0.8rem; opacity: 0.7; margin-top: 8px;">
                            <span id="tenant-count">--</span> tenants
                        </div>
                    </div>
                </div>

                <!-- System Status Alert -->
                <div id="system-alert" class="alert alert-info" style="display: none;">
                    <strong>‚ÑπÔ∏è System Status:</strong> <span id="alert-message">All systems operational</span>
                </div>

                <!-- Monitoring Section -->
                <div class="monitoring-section">
                    <!-- Left Panel: Container Instances -->
                    <div class="panel">
                        <div class="panel-title">
                            <span>üê≥</span>
                            <span>Container Instances</span>
                            <div style="margin-left: auto;">
                                <span id="instance-count-display">--</span> running
                            </div>
                        </div>
                        
                        <div class="instance-grid" id="container-instances">
                            <!-- Container instances will be populated here -->
                        </div>
                    </div>

                    <!-- Right Panel: Real-time Logs -->
                    <div class="panel">
                        <div class="panel-title">
                            <span>üìù</span>
                            <span>System Logs</span>
                            <div style="margin-left: auto; font-size: 0.8rem; opacity: 0.7;">Live</div>
                        </div>
                        
                        <div class="logs-container" id="system-logs">
                            <!-- Real logs will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-top: 20px;">
                    <button class="btn btn-primary" onclick="refreshData()">
                        üîÑ Refresh Data
                    </button>
                    <button class="btn btn-secondary" onclick="exportData()">
                        üìä Export Metrics
                    </button>
                    <button class="btn btn-secondary" onclick="viewDetailed()">
                        üìà Detailed View
                    </button>
                </div>
            </div>

            <!-- Monitor Tab -->
            <div id="monitor" class="tab-content">
                <div class="panel">
                    <div class="panel-title">
                        <span>üìà</span>
                        <span>Real-Time Monitoring Dashboard</span>
                    </div>

                    <!-- Resource Usage Charts -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 30px;">
                        <div style="background: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 20px;">
                            <h4 style="margin-bottom: 16px; color: #00ff88;">üñ•Ô∏è CPU Performance</h4>
                            <div style="text-align: center; padding: 40px;">
                                <div style="font-size: 3rem; margin-bottom: 16px;" id="cpu-chart-value">--</div>
                                <p style="opacity: 0.8;">Current CPU utilization</p>
                                <div style="margin-top: 16px;">
                                    <div style="font-size: 0.9rem; opacity: 0.7;">
                                        Load Average: <span id="load-average">--</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style="background: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 20px;">
                            <h4 style="margin-bottom: 16px; color: #3b82f6;">üß† Memory Usage</h4>
                            <div style="text-align: center; padding: 40px;">
                                <div style="font-size: 3rem; margin-bottom: 16px;" id="memory-chart-value">--</div>
                                <p style="opacity: 0.8;">Current memory utilization</p>
                                <div style="margin-top: 16px;">
                                    <div style="font-size: 0.9rem; opacity: 0.7;">
                                        Available: <span id="available-memory">--</span> GB
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style="background: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 20px;">
                            <h4 style="margin-bottom: 16px; color: #8b5cf6;">üíæ Storage</h4>
                            <div style="text-align: center; padding: 40px;">
                                <div style="font-size: 3rem; margin-bottom: 16px;" id="disk-chart-value">--</div>
                                <p style="opacity: 0.8;">Disk space utilization</p>
                                <div style="margin-top: 16px;">
                                    <div style="font-size: 0.9rem; opacity: 0.7;">
                                        Free: <span id="free-space">--</span> GB
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Network and Container Stats -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div style="background: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 20px;">
                            <h4 style="margin-bottom: 16px; color: #fbbf24;">üåê Network Activity</h4>
                            <div id="network-stats">
                                <div style="display: flex; justify-content: space-between; margin: 8px 0;">
                                    <span>Inbound:</span>
                                    <span id="network-in">-- MB/s</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin: 8px 0;">
                                    <span>Outbound:</span>
                                    <span id="network-out">-- MB/s</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin: 8px 0;">
                                    <span>Connections:</span>
                                    <span id="active-connections">--</span>
                                </div>
                            </div>
                        </div>

                        <div style="background: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 20px;">
                            <h4 style="margin-bottom: 16px; color: #10b981;">üè† Tenant Overview</h4>
                            <div id="tenant-stats">
                                <div style="display: flex; justify-content: space-between; margin: 8px 0;">
                                    <span>Active Tenants:</span>
                                    <span id="active-tenants">--</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin: 8px 0;">
                                    <span>Available Slots:</span>
                                    <span id="available-slots">--</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin: 8px 0;">
                                    <span>Total Capacity:</span>
                                    <span id="total-capacity">--</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Deploy Tab -->
            <div id="deploy" class="tab-content">
                <div class="panel">
                    <div class="panel-title">
                        <span>üöÄ</span>
                        <span>Deploy Applications</span>
                    </div>

                    <!-- Deployment Status -->
                    <div class="alert alert-info">
                        <strong>‚úÖ Ready for Deployment</strong> - Host has available capacity for new applications
                    </div>

                    <!-- Quick Deploy Templates -->
                    <div style="margin-bottom: 30px;">
                        <h4 style="margin-bottom: 16px;">‚ö° Quick Deploy Templates</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px;">
                            <div class="stat-card" style="cursor: pointer;" onclick="deployTemplate('defi')">
                                <div class="stat-icon">üí∞</div>
                                <div style="font-weight: 600; margin-bottom: 8px;">DeFi Exchange</div>
                                <div style="font-size: 0.9rem; opacity: 0.8;">Decentralized trading platform</div>
                                <button class="btn btn-primary" style="margin-top: 12px; width: 100%;">Deploy</button>
                            </div>

                            <div class="stat-card" style="cursor: pointer;" onclick="deployTemplate('nft')">
                                <div class="stat-icon">üé®</div>
                                <div style="font-weight: 600; margin-bottom: 8px;">NFT Marketplace</div>
                                <div style="font-size: 0.9rem; opacity: 0.8;">Buy, sell, and trade NFTs</div>
                                <button class="btn btn-primary" style="margin-top: 12px; width: 100%;">Deploy</button>
                            </div>

                            <div class="stat-card" style="cursor: pointer;" onclick="deployTemplate('dao')">
                                <div class="stat-icon">üèõÔ∏è</div>
                                <div style="font-weight: 600; margin-bottom: 8px;">DAO Platform</div>
                                <div style="font-size: 0.9rem; opacity: 0.8;">Governance and voting system</div>
                                <button class="btn btn-primary" style="margin-top: 12px; width: 100%;">Deploy</button>
                            </div>
                        </div>
                    </div>

                    <!-- Custom Deployment Form -->
                    <div style="background: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 24px;">
                        <h4 style="margin-bottom: 20px;">üõ†Ô∏è Custom Deployment</h4>
                        <div class="deployment-form">
                            <div class="form-group">
                                <label class="form-label">Application Name</label>
                                <input type="text" class="form-input" placeholder="My DeFi App" id="app-name">
                            </div>

                            <div class="form-group">
                                <label class="form-label">Container Image</label>
                                <input type="text" class="form-input" placeholder="docker.io/myapp:latest" id="container-image">
                            </div>

                            <div class="form-group">
                                <label class="form-label">Resource Allocation</label>
                                <select class="form-select" id="resource-tier">
                                    <option value="small">Small (1 CPU, 1GB RAM)</option>
                                    <option value="medium" selected>Medium (2 CPU, 2GB RAM)</option>
                                    <option value="large">Large (4 CPU, 4GB RAM)</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Environment Variables</label>
                                <textarea class="form-input" placeholder="KEY1=value1&#10;KEY2=value2" id="env-vars" rows="3"></textarea>
                            </div>

                            <button class="btn btn-primary" onclick="deployCustom()" style="width: 100%;">
                                üöÄ Deploy Application
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analytics Tab -->
            <div id="analytics" class="tab-content">
                <div class="panel">
                    <div class="panel-title">
                        <span>üìä</span>
                        <span>Analytics Dashboard</span>
                    </div>

                    <!-- Key Metrics -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 30px;">
                        <div class="stat-card">
                            <div class="stat-icon">üí∞</div>
                            <div class="stat-value" id="total-earnings">$--</div>
                            <div class="stat-label">Total Earnings</div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon">üìà</div>
                            <div class="stat-value" id="monthly-revenue">$--</div>
                            <div class="stat-label">Monthly Revenue</div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon">üë•</div>
                            <div class="stat-value" id="total-deployments">--</div>
                            <div class="stat-label">Total Deployments</div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon">‚è±Ô∏è</div>
                            <div class="stat-value" id="avg-uptime">--%</div>
                            <div class="stat-label">Average Uptime</div>
                        </div>
                    </div>

                    <!-- Performance Trends -->
                    <div style="background: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 24px; margin-bottom: 20px;">
                        <h4 style="margin-bottom: 16px;">üìà Performance Trends (Last 7 Days)</h4>
                        <div style="text-align: center; padding: 40px;">
                            <div style="font-size: 2rem; margin-bottom: 20px;">üìä</div>
                            <p style="opacity: 0.8;">Real-time performance charts and analytics</p>
                            <button class="btn btn-primary" onclick="loadAnalytics()" style="margin-top: 20px;">
                                üìà Load Analytics Dashboard
                            </button>
                        </div>
                    </div>

                    <!-- Export Options -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
                        <button class="btn btn-secondary" onclick="exportAnalytics()">
                            üìä Export Data
                        </button>
                        <button class="btn btn-secondary" onclick="generateReport()">
                            üìÑ Generate Report
                        </button>
                        <button class="btn btn-secondary" onclick="scheduleReport()">
                            üìÖ Schedule Reports
                        </button>
                    </div>
                </div>
            </div>

            <!-- Settings Tab -->
            <div id="settings" class="tab-content">
                <div class="panel">
                    <div class="panel-title">
                        <span>‚öôÔ∏è</span>
                        <span>Host Configuration</span>
                    </div>

                    <!-- Host Information -->
                    <div style="background: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 24px; margin-bottom: 20px;">
                        <h4 style="margin-bottom: 16px;">üñ•Ô∏è Host Information</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
                            <div>
                                <div style="font-weight: 600; margin-bottom: 4px;">Host Name</div>
                                <div style="opacity: 0.8;" id="host-name">Loading...</div>
                            </div>
                            <div>
                                <div style="font-weight: 600; margin-bottom: 4px;">IP Address</div>
                                <div style="opacity: 0.8;" id="host-ip">Loading...</div>
                            </div>
                            <div>
                                <div style="font-weight: 600; margin-bottom: 4px;">EVR Address</div>
                                <div style="opacity: 0.8; font-family: monospace; font-size: 0.85rem;" id="evr-address">Loading...</div>
                            </div>
                            <div>
                                <div style="font-weight: 600; margin-bottom: 4px;">Host Status</div>
                                <div style="opacity: 0.8;" id="host-status">
                                    <span class="status-dot status-healthy" style="display: inline-block; margin-right: 8px;"></span>
                                    Online
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Configuration Options -->
                    <div style="background: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 24px;">
                        <h4 style="margin-bottom: 16px;">üîß Configuration</h4>
                        
                        <div class="form-group">
                            <label class="form-label">Maximum Tenants</label>
                            <select class="form-select" id="max-tenants">
                                <option value="1">1 Tenant</option>
                                <option value="2">2 Tenants</option>
                                <option value="3" selected>3 Tenants</option>
                                <option value="5">5 Tenants</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Auto-scaling</label>
                            <select class="form-select" id="auto-scaling">
                                <option value="enabled" selected>Enabled</option>
                                <option value="disabled">Disabled</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Monitoring Interval</label>
                            <select class="form-select" id="monitoring-interval">
                                <option value="10">10 seconds</option>
                                <option value="30" selected>30 seconds</option>
                                <option value="60">60 seconds</option>
                            </select>
                        </div>

                        <button class="btn btn-primary" onclick="saveSettings()" style="width: 100%; margin-top: 20px;">
                            üíæ Save Configuration
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let lastUpdateTime = new Date();
        let monitoringInterval;
        let currentData = {};

        // Tab switching
        function switchTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab content
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked tab
            event.target.classList.add('active');
        }

        // Real-time data fetching
        async function fetchRealTimeData() {
            try {
                // Fetch system stats from your real-time monitoring API
                const response = await fetch('/api/realtime-monitor.php?action=system');
                const data = await response.json();
                
                if (data.success) {
                    currentData = data.data;
                    updateDashboard(data.data);
                } else {
                    console.error('API Error:', data.error);
                    showFallbackData();
                }
            } catch (error) {
                console.error('Failed to fetch real-time data:', error);
                showFallbackData();
            }
        }

        // Update dashboard with real data
        function updateDashboard(data) {
            // Update overview stats
            document.getElementById('cpu-usage').textContent = data.cpu?.percentage || '--';
            document.getElementById('memory-usage').textContent = data.memory?.percentage || '--';
            document.getElementById('disk-usage').textContent = data.disk?.percent || '--';
            document.getElementById('container-count').textContent = data.instances?.count || '--';
            document.getElementById('tenant-count').textContent = data.instances?.tenants || '--';

            // Update progress bars
            updateProgressBar('cpu-progress', data.cpu?.percentage);
            updateProgressBar('memory-progress', data.memory?.percentage);
            updateProgressBar('disk-progress', data.disk?.percent);

            // Update detailed monitoring
            document.getElementById('cpu-chart-value').textContent = (data.cpu?.percentage || '--') + '%';
            document.getElementById('memory-chart-value').textContent = (data.memory?.percentage || '--') + '%';
            document.getElementById('disk-chart-value').textContent = (data.disk?.percent || '--') + '%';
            
            document.getElementById('load-average').textContent = data.cpu?.load_average || '--';
            document.getElementById('available-memory').textContent = 
                data.memory?.available_gb ? data.memory.available_gb.toFixed(1) : '--';
            document.getElementById('free-space').textContent = 
                data.disk?.free_gb ? data.disk.free_gb.toFixed(1) : '--';

            // Update tenant stats
            document.getElementById('active-tenants').textContent = data.instances?.tenants || '--';
            document.getElementById('available-slots').textContent = 
                data.instances?.max_instances ? (data.instances.max_instances - (data.instances.count || 0)) : '--';
            document.getElementById('total-capacity').textContent = data.instances?.max_instances || '--';

            // Update system alerts
            updateSystemAlerts(data);

            // Update container instances
            updateContainerInstances(data.containers || []);

            // Update last update time
            lastUpdateTime = new Date();
            document.getElementById('last-update').textContent = 
                `Live monitoring ‚Ä¢ Updated: ${lastUpdateTime.toLocaleTimeString()}`;
        }

        // Update progress bars
        function updateProgressBar(elementId, percentage) {
            const element = document.getElementById(elementId);
            if (element && percentage !== undefined) {
                element.style.width = percentage + '%';
                
                // Color coding based on usage
                if (percentage > 80) {
                    element.style.background = 'linear-gradient(90deg, #ff4444, #cc0000)';
                } else if (percentage > 60) {
                    element.style.background = 'linear-gradient(90deg, #ffd700, #ffb000)';
                } else {
                    element.style.background = 'linear-gradient(90deg, #00ff88, #00cc70)';
                }
            }
        }

        // Update system alerts
        function updateSystemAlerts(data) {
            const alertElement = document.getElementById('system-alert');
            const messageElement = document.getElementById('alert-message');
            
            let hasAlert = false;
            let alertMessage = 'All systems operational';
            let alertClass = 'alert-info';

            // Check for high resource usage
            if (data.cpu?.percentage > 80) {
                hasAlert = true;
                alertMessage = '‚ö†Ô∏è High CPU usage detected';
                alertClass = 'alert-warning';
            } else if (data.memory?.percentage > 85) {
                hasAlert = true;
                alertMessage = '‚ö†Ô∏è High memory usage detected';
                alertClass = 'alert-warning';
            } else if (data.disk?.percent > 90) {
                hasAlert = true;
                alertMessage = 'üö® Critical disk space - cleanup required';
                alertClass = 'alert-warning';
            }

            if (hasAlert) {
                alertElement.style.display = 'block';
                alertElement.className = `alert ${alertClass}`;
                messageElement.textContent = alertMessage;
            } else {
                alertElement.style.display = 'none';
            }
        }

        // Update container instances
        function updateContainerInstances(containers) {
            const container = document.getElementById('container-instances');
            const countDisplay = document.getElementById('instance-count-display');
            
            countDisplay.textContent = containers.length;
            
            container.innerHTML = '';
            
            if (containers.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; opacity: 0.6;">
                        <div style="font-size: 2rem; margin-bottom: 16px;">üì¶</div>
                        <p>No active containers</p>
                    </div>
                `;
                return;
            }

            containers.forEach((cont, index) => {
                const instanceCard = document.createElement('div');
                instanceCard.className = 'instance-card';
                
                const status = cont.cpu_percent > 80 ? 'critical' : 
                             cont.cpu_percent > 60 ? 'warning' : 'healthy';
                
                instanceCard.innerHTML = `
                    <div class="instance-header">
                        <div class="instance-name">${cont.name || `Container ${index + 1}`}</div>
                        <div class="status-dot status-${status}"></div>
                    </div>
                    <div class="metrics-row">
                        <div class="metric-item">
                            <div class="metric-value">${cont.cpu_percent || '--'}%</div>
                            <div class="metric-label">CPU</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value">${cont.memory_percent || '--'}%</div>
                            <div class="metric-label">Memory</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value">${cont.status || 'Unknown'}</div>
                            <div class="metric-label">Status</div>
                        </div>
                    </div>
                `;
                
                container.appendChild(instanceCard);
            });
        }

        // Fallback data for demo purposes
        function showFallbackData() {
            const fallbackData = {
                cpu: { percentage: 45, load_average: '0.8, 0.7, 0.6' },
                memory: { percentage: 62, available_gb: 1.8 },
                disk: { percent: 67, free_gb: 6.4 },
                instances: { count: 2, tenants: 2, max_instances: 3 },
                containers: [
                    { name: 'DeFi Exchange', cpu_percent: 45, memory_percent: 38, status: 'Running' },
                    { name: 'NFT Marketplace', cpu_percent: 32, memory_percent: 24, status: 'Running' }
                ]
            };
            
            updateDashboard(fallbackData);
        }

        // Deployment functions
        function deployTemplate(template) {
            const templates = {
                defi: { name: 'DeFi Exchange', image: 'defi-exchange:latest' },
                nft: { name: 'NFT Marketplace', image: 'nft-marketplace:latest' },
                dao: { name: 'DAO Platform', image: 'dao-platform:latest' }
            };
            
            const templateData = templates[template];
            if (templateData) {
                showNotification(`üöÄ Deploying ${templateData.name}...`, 'info');
                
                // Simulate deployment
                setTimeout(() => {
                    showNotification(`‚úÖ ${templateData.name} deployed successfully!`, 'success');
                    fetchRealTimeData(); // Refresh data
                }, 3000);
            }
        }

        function deployCustom() {
            const appName = document.getElementById('app-name').value;
            const containerImage = document.getElementById('container-image').value;
            
            if (!appName || !containerImage) {
                showNotification('‚ö†Ô∏è Please fill in all required fields', 'warning');
                return;
            }
            
            showNotification(`üöÄ Deploying ${appName}...`, 'info');
            
            // Simulate deployment
            setTimeout(() => {
                showNotification(`‚úÖ ${appName} deployed successfully!`, 'success');
                fetchRealTimeData(); // Refresh data
            }, 5000);
        }

        // Utility functions
        function refreshData() {
            showNotification('üîÑ Refreshing data...', 'info');
            fetchRealTimeData();
        }

        function exportData() {
            showNotification('üìä Exporting metrics data...', 'info');
            // Implementation would export current monitoring data
        }

        function viewDetailed() {
            window.open('/monitoring-dashboard.html', '_blank');
        }

        function loadAnalytics() {
            showNotification('üìà Loading analytics dashboard...', 'info');
            // Implementation would load detailed analytics
        }

        function saveSettings() {
            showNotification('üíæ Settings saved successfully!', 'success');
            // Implementation would save configuration
        }

        // Notification system
        function showNotification(message, type = 'info') {
            // Create notification element
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                z-index: 1000;
                background: ${type === 'success' ? 'rgba(34, 197, 94, 0.2)' : 
                           type === 'warning' ? 'rgba(245, 158, 11, 0.2)' : 
                           'rgba(59, 130, 246, 0.2)'};
                color: ${type === 'success' ? '#4ade80' : 
                        type === 'warning' ? '#fbbf24' : '#60a5fa'};
                border: 1px solid ${type === 'success' ? 'rgba(34, 197, 94, 0.3)' : 
                                   type === 'warning' ? 'rgba(245, 158, 11, 0.3)' : 
                                   'rgba(59, 130, 246, 0.3)'};
                border-radius: 8px;
                padding: 16px 24px;
                backdrop-filter: blur(10px);
                transform: translateX(100%);
                transition: transform 0.3s ease;
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Load initial data
            fetchRealTimeData();
            
            // Set up real-time updates
            monitoringInterval = setInterval(fetchRealTimeData, 30000); // Update every 30 seconds
            
            // Load host info
            loadHostInfo();
        });

        // Load host information
        async function loadHostInfo() {
            try {
                const response = await fetch('/api/host-info.php');
                const data = await response.json();
                
                if (data.success) {
                    document.getElementById('host-name').textContent = data.hostname || 'Unknown';
                    document.getElementById('host-ip').textContent = data.ip || 'Unknown';
                    document.getElementById('evr-address').textContent = data.evr_address || 'Not configured';
                }
            } catch (error) {
                console.error('Failed to load host info:', error);
            }
        }
    </script>
</body>
</html>
